/*! jQuery Overlay Image Check - v0.1.0 - 2013-06-20
* https://github.com/jjacobs/jquery.overlayImageCheck
*
* jQuery plugin to create radio / checkboxes with a nonchecked image and an overlaid checked image.
* 
*
* Copyright (c) 2013 Julia Jacobs; Licensed MIT */
(function(e){"use strict";e.fn.overlayImageCheck=function(t){var a=this;return 1>a.length?a:(t=t?t:{},t=c(t),a.each(function(){var a=e(this);(a.is(":checkbox")||a.is(":radio"))&&i(a,t)}),a)};var t=function(t,i,c){var r=t.attr("tabindex")||t.get(0).tabIndex||0;i.css({cursor:"pointer"}).click(function(e){e.preventDefault(),a(t,i,c,!1)}).keypress(function(t){var i=t.which?t.which:t.keyCode?t.keyCode:0;(13===i||32===i)&&e(this).click()}).hover(function(){e(this).addClass("imageCheckHover")},function(){e(this).removeClass("imageCheckHover")}).get(0).tabIndex=r},i=function(i,c){c.wasChecked?i.prop("checked",!0):i.prop("checked",!1);var r=i.is(":checked"),h=i.attr("id");(!h||1>h.length)&&(h=i.attr("id","imageCheckInput_"+e.fn.overlayImageCheck.uid++).attr("id"));for(var n=["checked","unchecked"],d=[],o=0;n.length>o;o++){var s="checked"===n[o],k="ic_"+h+"_"+o,g=e("<img />").attr("src",s?c.imageChecked:c.image).attr("id",k).attr("alt",i.attr("id")).attr("title",i.attr("id")).attr("width",c.width?c.width:"").attr("height",c.height?c.height:"").addClass("imageCheck"+(s?" checked":"")).attr("role","checkbox").attr("aria-checked",s?"true":"false").attr("aria-controls",k).attr("pointer-events",s?"none":"auto");s&&g.css({position:"absolute"}),d.push(g)}var p=d[0],u=d[1],l=e("<div></div>").attr("id",p.attr("id")+"_wrapper").css({cursor:"pointer",position:"relative",width:c.width,height:c.height,padding:"4px 0 0 3px"});l.append(p),l.append(u),r&&l.addClass("checked"),r?p.show():p.hide(),i.before(l),i.click(function(e,t){t!==!0&&a(i,l,c,!0)}).hide(),t(i,l,c)},a=function(t,i,a,c){a.wasChecked||i.hasClass("checked")?t.prop("checked",!1):t.prop("checked",!0),i.hasClass("checked")!==t.is(":checked")||c||t.trigger("click",[!0]).change();var r=t.is(":checked");i.toggleClass("checked");var h=i.attr("id").replace("_wrapper","");e("#"+h).toggle(),t.is(":radio")&&!c&&e('input[name="'+t.attr("name")+'"]').not(t).each(function(){e("#ic_"+this.id).removeClass("checked").attr({"aria-checked":"false",src:""+a.image})}),setTimeout(function(){a.afterCheck.apply(t,[r])},25)},c=function(t){return e.isFunction(t.afterCheck)||(t.afterCheck=function(){}),"string"!=typeof t.image&&(t.image=""),"string"!=typeof t.imageChecked&&(t.imageChecked=""),"string"!=typeof t.width&&(t.width=""),"string"!=typeof t.height&&(t.height=""),"boolean"!=typeof t.wasChecked&&(t.wasChecked=!1),t};e.fn.overlayImageCheck.uid=0})(jQuery);